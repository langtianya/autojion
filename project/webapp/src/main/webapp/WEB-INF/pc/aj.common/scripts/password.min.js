$(function(){$("#bodyContent").i18n();$("#pwdBtn").click(function(){c();return false});var b=$("#pwdBox input");if($("#username").val()==""){b[0].focus()}else{b[1].focus()}var a=b.length;b.each(function(d,e){$(this).keypress(function(f){if(f.keyCode==13){if(d==a-1){c()}else{b[d+1].focus()}}})});function c(){if(!$("#pwdBox").form("validate")){$.messager.alert($.i18n.get("error"),$.i18n.get("validateError"),"error");return false}var e=$.messager.progress({title:$.i18n.get("prompt"),msg:$.i18n.get("waitingMessage")});var f=$("form#pwdBox").serialize();var d=pwdFromLoginUser?"changeOthersPassword.arz":"changePassword.pub";$.ajax({type:"post",url:d,data:f,success:function(i,g,h){$.messager.progress("close");if(!i.success){$.messager.alert($.i18n.get("error"),i.msg||$.i18n.get("prompt.exception"),"error");return}else{$.messager.alert($.i18n.get("change.password.success.title"),$.i18n.get("change.password.success.message"),"info",function(){window.location.href="index.pub"})}},error:function(i,g,h){$.messager.progress("close");$.messager.alert($.i18n.get("error"),h||$.i18n.get("prompt.connection.exception"),"error")}})}});