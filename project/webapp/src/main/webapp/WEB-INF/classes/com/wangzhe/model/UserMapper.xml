<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wangzhe.model.UserMapper">


    <resultMap type="com.wangzhe.model.User" id="cc_user">
        <result column="cc_user" property="User" javaType="com.wangzhe.model.User"/>
    </resultMap>

    <!-- 这里namespace必须是UserMapper接口的路径，不然要运行的时候要报错 “is not known to the MapperRegistry”-->
    <insert id="insert" parameterType="com.wangzhe.model.User">
        insert into cc_user(uName,uPwd,uAgents,uAuth,uDate) values(#{uName},#{uPwd},#{uAgents},#{uAuth},#{uDate})
        <!-- 这里sql结尾不能加分号，否则报“ORA-00911”的错误 -->
    </insert>


    <select id="getUserByName" resultType="com.wangzhe.model.User" parameterType="java.lang.String">
        select * from cc_user where uName=#{uName}
    </select>
    <select id="getUserById" resultType="com.wangzhe.model.User" parameterType="java.lang.String">
        select * from cc_user where uId=#{uId}
    </select>

    <select id="checkUser" parameterType="com.wangzhe.model.User" resultType="com.wangzhe.model.User">
        <![CDATA[
       select * from cc_user where uName=#{uName} and uPwd=#{uPwd}
    ]]>
    </select>
    <select id="getAllUsers" resultType="com.wangzhe.model.User">
        select * from cc_user order by uDate DESC limit 100
    </select>
    <delete id="deleteUserById" parameterType="java.lang.String">
        delete from cc_user where uId=#{uId}
    </delete>
    <select id="getUAgent" resultType="java.lang.String">
        select uAgents from cc_user
    </select>

    <update id="updateUserPass" parameterType="com.wangzhe.model.User">
        update cc_user set uName=#{uName},uPwd=#{uPwd}, uAgents=#{uAgents},uAuth=#{uAuth},uDate=#{uDate} where
        uId=#{uId}
    </update>
    <update id="updateUserInfo" parameterType="com.wangzhe.model.User">
        update cc_user set uName=#{uName},uAgents=#{uAgents},uAuth=#{uAuth} where uId=#{uId}
    </update>
</mapper>